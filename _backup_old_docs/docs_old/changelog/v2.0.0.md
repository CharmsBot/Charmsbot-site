# CharmsBot Update v2.5.0 - Security & Documentation Update

## Release Date: February 5, 2026

---

## ğŸ”’ Security Improvements

### Account Age Verification
All commands now verify that the Discord account meets a minimum age requirement before allowing access. This helps prevent abuse from newly created bot accounts or throwaway accounts.

**Affected commands:**
- `/character add`, `/character view`, `/character edit`, `/character delete`
- `/hunt view`, `/hunt delete`, `/hunt rename`
- `/analysis`, `/bestcharms`
- `/element`, `/weaponxp`, `/splitloot`
- `/hotcuisine`

### Bot Account Blocking
All commands now block requests from bot accounts, ensuring only real users can interact with CharmsBot.

### Rate Limiting (Heavy Commands)
The following commands have additional rate limiting to prevent server stress:
- `/analysis` - Global and per-user rate limits
- `/bestcharms` - Global and per-user rate limits

---

## ğŸ“ Help Command Updates

The `/help` command has been completely updated to reflect all recent changes:

### Updated Command Descriptions

**`/character add`**
- Now mentions that **Total Charm Points** is required
- Documents the charm level system (ğŸ”¹lvl1, âœ¨lvl2, â­lvl3)

**`/analysis`**
- Clarified that it uses **your character's saved charms** at their configured levels
- Added requirement note: Character must have Charm Points Total configured
- Listed all features including charm levels, element analysis, and save functionality

**`/bestcharms`**
- Clarified that it evaluates **ALL available damage charms** in the game
- Added requirement note: Character must have Charm Points Total configured
- Documented budget optimization, reset cost calculation, and damage comparison features

**`/element`**
- Emphasized that **no character is required**
- Great for quick spawn analysis before hunting

**`/splitloot`**
- Added waste tracking feature documentation
- Documented channel restrictions (`hunt-analyser`, `split-loot`)

**`/hotcuisine`**
- Updated feature list with all current capabilities

### First Time Setup Guide
The main help menu now includes a clear step-by-step guide for new users:

1. Run `/character add`
2. Enter your character name, level, max HP, and max mana
3. Enter your **Total Charm Points** (find it in Tibia: `Cyclopedia â†’ Charms`)
4. Select your unlocked charms and set their levels:
   - ğŸ”¹ Level 1 (5%) | âœ¨ Level 2 (10%) | â­ Level 3 (11%)
5. Save your character

**Done!** Now you can use `/analysis` or `/bestcharms` with your hunt data.

---

## ğŸ“‹ Commands Summary

| Command              | Security Gate | Rate Limited |
|----------------------|:-------------:|:------------:|
| `/character add`     | âœ…            | -            |
| `/character view`    | âœ…            | -            |
| `/character edit`    | âœ…            | -            |
| `/character delete`  | âœ…            | -            |
| `/hunt view`         | âœ…            | -            |
| `/hunt delete`       | âœ…            | -            |
| `/hunt rename`       | âœ…            | -            |
| `/analysis`          | âœ…            | âœ… Heavy     |
| `/bestcharms`        | âœ…            | âœ… Heavy     |
| `/element`           | âœ…            | -            |
| `/weaponxp`          | âœ…            | -            |
| `/splitloot`         | âœ…            | -            |
| `/hotcuisine`        | âœ…            | -            |

---

## ğŸ› Bug Fixes

- Fixed potential issues with unhandled exceptions in modal submissions
- Improved error messages for invalid Hunt Analyzer data
- Better handling of edge cases in various commands

---

## ğŸ“Œ Notes

- Rate limits are designed to prevent abuse while allowing normal usage patterns.

---

**Thank you for using CharmsBot!** ğŸ®âœ¨

If you encounter any issues or have suggestions, please contact the server admin.