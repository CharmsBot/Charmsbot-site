<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CharmsBot - Home</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }

    body{
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      color:#e4e4e4;
      min-height:100vh;
      padding:40px 20px;
      line-height:1.6;
    }

    .container{
      max-width:900px;
      margin:0 auto;
      background: rgba(255,255,255,0.05);
      border-radius:20px;
      padding:40px;
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,0.1);
      box-shadow:0 8px 32px rgba(0,0,0,0.3);
    }

    h1{
      text-align:center;
      font-size:2.5em;
      margin: 10px 0 10px 0;
      background: linear-gradient(90deg, #00d4ff, #7b2cbf);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }

    .subtitle{
      text-align:center;
      color:#888;
      font-size:1.1em;
      margin-bottom:30px;
      padding-bottom:20px;
      border-bottom:1px solid rgba(255,255,255,0.1);
    }

    /* Top navigation */
    .nav {
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      justify-content:center;
      margin: 10px 0 30px 0;
    }
    .nav a{
      text-decoration:none;
      color: rgba(255,255,255,0.86);
      background: rgba(91,45,132,0.65);
      border: 1px solid rgba(160,120,220,0.35);
      padding: 11px 18px;
      border-radius: 16px;
      transition: transform .08s ease, background .08s ease;
      font-weight: 600;
    }
    .nav a:hover{ transform: translateY(-1px); background: rgba(109,58,160,0.70); }

    .logo-wrap{
      display:flex;
      justify-content:center;
      margin: 0 0 12px 0;
    }
    .logo{
      width:200px;
      max-width:60vw;
      border-radius:14px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.08);
    }

    h2{
      font-size:1.6em;
      margin: 30px 0 15px 0;
      padding-bottom:10px;
      border-bottom:2px solid rgba(255,255,255,0.1);
      display:flex;
      align-items:center;
      gap:10px;
    }

    h3{
      font-size:1.2em;
      margin: 18px 0 10px 0;
      color:#00d4ff;
    }

    p{ margin-bottom:15px; color:#c4c4c4; }

    ul{ margin: 12px 0 12px 25px; }
    li{ margin-bottom:8px; color:#c4c4c4; }

    code{
      background: rgba(0, 212, 255, 0.15);
      color:#00d4ff;
      padding:2px 8px;
      border-radius:4px;
      font-family: 'Consolas','Monaco', monospace;
      font-size:0.95em;
      font-weight:700;
    }

    .feature-box{
      background: rgba(0, 212, 255, 0.08);
      border-left:4px solid #00d4ff;
      padding:20px 25px;
      border-radius:0 10px 10px 0;
      margin: 15px 0;
    }

    .feature-box.green{
      background: rgba(0, 255, 136, 0.08);
      border-left-color:#00ff88;
    }

    .note-box{
      background: rgba(255, 215, 0, 0.10);
      border: 1px solid rgba(255, 215, 0, 0.30);
      padding: 18px 20px;
      border-radius: 10px;
      margin: 18px 0;
    }
    .note-box p{ color:#ffd700; margin:0; }

    .discord-card{
      background: rgba(123, 44, 191, 0.12);
      border: 1px solid rgba(123, 44, 191, 0.25);
      padding: 18px 20px;
      border-radius: 12px;
      margin-top: 12px;
    }

    .discord-badge-wrap{
      margin-top: 10px;
      display:flex;
      justify-content:flex-start;
    }

    .discord-badge-wrap img{
      display:block;
      height: 44px;
      max-width: 100%;
    }

    .footer{
      text-align:center;
      margin-top:40px;
      padding-top:30px;
      border-top:1px solid rgba(255,255,255,0.1);
    }
    .footer p{ color:#888; font-size:0.95em; margin:6px 0; }

    /* ========================================= */
    /* SIDEBAR WIDGETS STYLES (MATCHING JS)      */
    /* ========================================= */

    /* Right side Pedestal */
    .right-widget-wrapper {
      position: fixed;
      top: 30px;
      right: 30px;
      z-index: 9999;
    }

    /* Left side Bot Status */
    .left-status-wrapper {
      position: fixed;
      top: 30px;
      left: 30px;
      z-index: 10000;
    }

    /* Glassmorphism Bot Status Container */
    #bot-status-container {
      background: rgba(255, 255, 255, 0.05); 
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
    }

    .bot-status-indicator {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background-color: #888; /* Neutral initial color */
      transition: all 0.3s ease;
    }

    .bot-status-text {
      font-weight: 700;
      font-size: 0.9em;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #888;
    }

    /* --- JS DYNAMIC CLASSES --- */
    
    /* Online state */
    #bot-status-container.online .bot-status-indicator {
      background-color: #00ff4c;
      box-shadow: 0 0 15px rgba(0, 255, 76, 0.8);
    }
    #bot-status-container.online .bot-status-text { color: #00ff4c; }
    #bot-status-container.online { border-color: rgba(0, 255, 76, 0.3); }

    /* Offline state */
    #bot-status-container.offline .bot-status-indicator {
      background-color: #ff2b2b;
      box-shadow: 0 0 15px rgba(255, 43, 43, 0.8);
    }
    #bot-status-container.offline .bot-status-text { color: #ff2b2b; }
    #bot-status-container.offline { border-color: rgba(255, 43, 43, 0.2); }

    @media (max-width: 1200px) {
        .right-widget-wrapper, .left-status-wrapper {
            position: relative;
            top: auto;
            right: auto;
            left: auto;
            display: flex;
            justify-content: center;
            margin: 20px auto;
        }
    }
  </style>
  <link rel="icon" href="/assets/images/_shared/favicon/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/assets/images/_shared/favicon/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/assets/images/_shared/favicon/favicon-16x16.png" sizes="16x16">
  <link rel="apple-touch-icon" href="/assets/images/_shared/favicon/apple-touch-icon.png">
  <meta name="theme-color" content="#7b2cbf">
  <link rel="stylesheet" href="/assets/css/boosted.css">
</head>
<body>
  <div class="container">
    <div class="logo-wrap">
      <img class="logo" src="https://i.imgur.com/FjCwTyg.png" alt="CharmsBot Logo" />
    </div>

    <h1>CharmsBot</h1>
    <p class="subtitle">Discord bot for Tibia ‚Ä¢ Documentation & Changelog</p>

    <div class="nav">
      <a href="./">Home</a>
      <a href="commands/">Commands</a>
      <a href="changelog/">Changelog</a>
      <a href="contact/">Contact</a>
      <a href="legal/">Legal</a>
    </div>

    <h2>üéØ Overview</h2>
    <p><strong>CharmsBot</strong> is a comprehensive Discord bot designed for Tibia players to optimize their hunting experience. It provides advanced charm assignment calculations, element efficiency analysis, loot splitting, and utility tools to help players maximize their damage output and manage hunts efficiently.</p>

    <h2>üéØ Features</h2>

    <h3>Character Management</h3>
    <div class="feature-box">
      <ul>
        <li><strong>Charm Points Budget System:</strong> Set your total charm points and compute optimal assignments within your budget</li>
        <li><strong>Multi-Level Charm Support:</strong> Level 1 (5%), Level 2 (10%), Level 3 (11%) proc rates</li>
        <li><strong>Limits:</strong> Up to 15 characters per user, with 20 saved analyses and 20 saved bestcharms per character</li>
      </ul>
    </div>

    <h3>Hunt Analysis Tools</h3>
    <div class="feature-box">
      <ul>
        <li><strong>Optimal Charm Assignments:</strong> Hungarian Algorithm-based assignments</li>
        <li><strong>Element Efficiency Analysis:</strong> See which elements deal bonus damage or are resisted</li>
        <li><strong>Damage Calculations:</strong> Vulnerability, mitigation, and damage-per-proc breakdowns</li>
      </ul>
    </div>

    <h3>Loot Management</h3>
    <div class="feature-box">
      <ul>
        <li><strong>Split Loot Calculator:</strong> Equitable distribution with extra expenses support</li>
        <li><strong>Transfer Instructions:</strong> Exact in-game transfers for settling debts</li>
      </ul>
    </div>

    <h3>Utility Tools</h3>
    <div class="feature-box">
      <ul>
        <li><strong>Weapon Proficiency XP Calculator</strong></li>
        <li><strong>Hot Cuisine Quest Calculator</strong></li>
      </ul>
    </div>

    <h2>üöÄ Getting Started</h2>

    <h3>Quick Start Guide</h3>
    <div class="feature-box green">
      <ol style="margin: 12px 0 0 22px; color:#c4c4c4;">
        <li style="margin-bottom:10px;">
          <strong>Create a Character</strong><br/>
          <code>/character add</code><br/>
          Enter name, level, max HP, max mana, and <strong>Total Charm Points</strong> (Tibia: <code>Cyclopedia ‚Üí Bosstiary & Charms ‚Üí Charms</code>), then select charms + levels.
        </li>
        <li style="margin-bottom:10px;">
          <strong>Analyze Your Hunt</strong><br/>
          <code>/analysis</code><br/>
          Select your character and paste Hunt Analyzer data. Optionally save it.
        </li>
        <li>
          <strong>Find the Best Charms</strong><br/>
          <code>/bestcharms</code><br/>
          Evaluates ALL damage charms, shows what you need and the reset cost.
        </li>
      </ol>
    </div>

    <h2>üîß Technical Details</h2>

    <h3>Charm Damage Calculations</h3>
    <div class="feature-box">
      <p><strong>Elemental Charms</strong> (Enflame, Freeze, Zap, Poison, Curse, Wound, Divine Wrath):</p>
      <ul>
        <li>Base damage: <code>min(5% √ó creature_health, player_level √ó 2)</code></li>
        <li>Final damage: <code>base_damage √ó vulnerability √ó (1 - mitigation/100)</code></li>
      </ul>

      <p><strong>Physical Charms</strong> (ignores vulnerability and mitigation):</p>
      <ul>
        <li>Overpower: <code>min(5% √ó max_hp, player_level √ó 2)</code> capped at <code>8% √ó creature_health</code></li>
        <li>Overflux: <code>min(2.5% √ó max_mana, player_level √ó 2)</code> capped at <code>8% √ó creature_health</code></li>
      </ul>
    </div>

    <h3>Charm Level Ratios</h3>
    <div class="feature-box">
      <ul>
        <li>üîπ Level 1 ‚Äî Proc Rate: 5% ‚Äî Damage Multiplier: 0.5√ó</li>
        <li>‚ú® Level 2 ‚Äî Proc Rate: 10% ‚Äî Damage Multiplier: 1.0√ó</li>
        <li>‚≠ê Level 3 ‚Äî Proc Rate: 11% ‚Äî Damage Multiplier: 1.1√ó</li>
      </ul>
    </div>

    <h3>Algorithm</h3>
    <div class="feature-box">
      <p>The bot uses the <strong>Hungarian Algorithm</strong> (<code>scipy.optimize.linear_sum_assignment</code>) to solve the optimal assignment problem and maximize total output.</p>
    </div>

    <h2>üõ°Ô∏è Security Features</h2>
    <div class="feature-box">
      <ul>
        <li><strong>Account Age Verification</strong></li>
        <li><strong>Rate Limiting</strong> (per-user and per-guild for heavy commands)</li>
        <li><strong>Input Validation</strong></li>
        <li><strong>Creature Limits</strong> (prevents resource exhaustion)</li>
      </ul>
    </div>

    <h2>üìä Supported Data</h2>
    <div class="feature-box">
      <h3>Creatures</h3>
      <ul>
        <li>Health points</li>
        <li>Mitigation values</li>
        <li>Elemental vulnerabilities and resistances</li>
      </ul>

      <h3>Charms</h3>
      <p>All 9 damage charms are supported:</p>
      <ul>
        <li>Enflame</li>
        <li>Freeze</li>
        <li>Zap</li>
        <li>Poison</li>
        <li>Curse</li>
        <li>Wound</li>
        <li>Divine Wrath</li>
        <li>Overpower</li>
        <li>Overflux</li>
      </ul>
    </div>

    <h2>üåê Language Support</h2>
    <div class="feature-box">
      <p>CharmsBot is available in <strong>English</strong> and is designed to support the international Tibia community.</p>
    </div>

    <h2>ü§ñ Add to Your Server</h2>
    <div class="discord-card">
      <p style="margin-bottom:12px; color:#c4c4c4;">
        Use the link below to add CharmsBot to your Discord server.
      </p>

      <div class="discord-badge-wrap">
        <a
          href="https://discord.com/oauth2/authorize?client_id=1324908850431791184&scope=bot%20applications.commands&permissions=0"
          target="_blank"
          rel="noopener noreferrer"
        >
          <img
            src="https://img.shields.io/badge/Add%20to%20Discord-5865F2?style=for-the-badge&logo=discord&logoColor=white"
            alt="Add to Discord"
          />
        </a>
      </div>
    </div>

    <div class="note-box">
      <p>CharmsBot is a fan-made project and is not affiliated with or endorsed by CipSoft GmbH. Tibia is a registered trademark of CipSoft GmbH.</p>
    </div>

    <div class="footer">
      <p>Made with ‚ù§Ô∏è for the Tibia community</p>
      <p>CharmsBot-site</p>
    </div>
  </div>

  <div class="right-widget-wrapper">
    <div id="boosted-widget"></div>
  </div>

  <div class="left-status-wrapper">
    <div id="bot-status-container" class="offline">
       <div class="bot-status-indicator"></div>
       <span class="bot-status-text" id="botStatusText">BOT OFFLINE</span>
    </div>
  </div>

  <script src="/assets/js/boosted.js"></script>
  <script src="/assets/js/bot-status.js"></script>
  
  <script>
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      return false;
    });
  </script>
</body>
</html>