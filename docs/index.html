<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CharmsBot - Home</title>

  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/header-bar.css">

  <link rel="icon" href="assets/images/_shared/favicon/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="assets/images/_shared/favicon/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="assets/images/_shared/favicon/favicon-16x16.png" sizes="16x16">
  <link rel="apple-touch-icon" href="assets/images/_shared/favicon/apple-touch-icon.png">
  <meta name="theme-color" content="#7b2cbf">
</head>
<body>
  <div class="top-header-bar">
    <div class="header-left offline">
      <div class="bot-status-indicator"></div>
      <span class="bot-status-text">CHARMSBOT OFFLINE</span>
    </div>

    <div class="header-center">
      <span class="countdown-label">Time to Server Save</span>
      <span id="serverSaveCountdown" class="countdown-timer">00:00:00</span>
    </div>

    <div class="header-right">
      <span class="boosted-label">Today's Boosted</span>
      <div class="boosted-pedestal">
        <img class="pedestal-base" 
             src="assets/images/_shared/boosted/_ui/pedestal.png" 
             alt="Pedestal">
        
        <img id="boostedCreatureImg" 
             class="boosted-sprite-creature" 
             alt="Boosted Creature" 
             loading="lazy"
             style="display:none;">
        
        <img id="boostedBossImg" 
             class="boosted-sprite-boss" 
             alt="Boosted Boss" 
             loading="lazy"
             style="display:none;">
      </div>
    </div>
  </div>

  <div class="container">
    <div class="logo-wrap">
      <img class="logo" src="https://i.imgur.com/FjCwTyg.png" alt="CharmsBot Logo" />
    </div>

    <h1>CharmsBot</h1>
    <p class="subtitle">Discord bot for Tibia â€¢ Documentation & Changelog</p>

    <div class="nav">
      <a href="./">Home</a>
      <a href="commands/">Commands</a>
      <a href="changelog/">Changelog</a>
      <a href="contact/">Contact</a>
      <a href="legal/">Legal</a>
    </div>

    <h2>ğŸ¯ Overview</h2>
    <p><strong>CharmsBot</strong> is a comprehensive Discord bot designed for Tibia players to optimize their hunting experience. It provides advanced charm assignment calculations, element efficiency analysis, loot splitting, and utility tools to help players maximize their damage output and manage hunts efficiently.</p>

    <h2>ğŸ¯ Features</h2>

    <h3>Character Management</h3>
    <div class="feature-box">
      <ul>
        <li><strong>Charm Points Budget System:</strong> Set your total charm points and compute optimal assignments within your budget</li>
        <li><strong>Multi-Level Charm Support:</strong> Level 1 (5%), Level 2 (10%), Level 3 (11%) proc rates</li>
        <li><strong>Limits:</strong> Up to 15 characters per user, with 20 saved analyses and 20 saved bestcharms per character</li>
      </ul>
    </div>

    <h3>Hunt Analysis Tools</h3>
    <div class="feature-box">
      <ul>
        <li><strong>Optimal Charm Assignments:</strong> Hungarian Algorithm-based assignments</li>
        <li><strong>Element Efficiency Analysis:</strong> See which elements deal bonus damage or are resisted</li>
        <li><strong>Damage Calculations:</strong> Vulnerability, mitigation, and damage-per-proc breakdowns</li>
      </ul>
    </div>

    <h3>Loot Management</h3>
    <div class="feature-box">
      <ul>
        <li><strong>Split Loot Calculator:</strong> Equitable distribution with extra expenses support</li>
        <li><strong>Transfer Instructions:</strong> Exact in-game transfers for settling debts</li>
      </ul>
    </div>

    <h3>Utility Tools</h3>
    <div class="feature-box">
      <ul>
        <li><strong>Weapon Proficiency XP Calculator</strong></li>
        <li><strong>Hot Cuisine Quest Calculator</strong></li>
      </ul>
    </div>

    <h2>ğŸš€ Getting Started</h2>

    <h3>Quick Start Guide</h3>
    <div class="feature-box green">
      <ol style="margin: 12px 0 0 22px; color:#c4c4c4;">
        <li style="margin-bottom:10px;">
          <strong>Create a Character</strong><br/>
          <code>/character add</code><br/>
          Enter name, level, max HP, max mana, and <strong>Total Charm Points</strong> (Tibia: <code>Cyclopedia â†’ Bosstiary & Charms â†’ Charms</code>), then select charms + levels.
        </li>
        <li style="margin-bottom:10px;">
          <strong>Analyze Your Hunt</strong><br/>
          <code>/analysis</code><br/>
          Select your character and paste Hunt Analyzer data. Optionally save it.
        </li>
        <li>
          <strong>Find the Best Charms</strong><br/>
          <code>/bestcharms</code><br/>
          Evaluates ALL damage charms, shows what you need and the reset cost.
        </li>
      </ol>
    </div>

    <h2>ğŸ”§ Technical Details</h2>

    <h3>Charm Damage Calculations</h3>
    <div class="feature-box">
      <p><strong>Elemental Charms</strong> (Enflame, Freeze, Zap, Poison, Curse, Wound, Divine Wrath):</p>
      <ul>
        <li>Base damage: <code>min(5% Ã— creature_health, player_level Ã— 2)</code></li>
        <li>Final damage: <code>base_damage Ã— vulnerability Ã— (1 - mitigation/100)</code></li>
      </ul>

      <p><strong>Physical Charms</strong> (ignores vulnerability and mitigation):</p>
      <ul>
        <li>Overpower: <code>min(5% Ã— max_hp, player_level Ã— 2)</code> capped at <code>8% Ã— creature_health</code></li>
        <li>Overflux: <code>min(2.5% Ã— max_mana, player_level Ã— 2)</code> capped at <code>8% Ã— creature_health</code></li>
      </ul>
    </div>

    <h3>Charm Level Ratios</h3>
    <div class="feature-box">
      <ul>
        <li>ğŸ”¹ Level 1 â€” Proc Rate: 5% â€” Damage Multiplier: 0.5Ã—</li>
        <li>âœ¨ Level 2 â€” Proc Rate: 10% â€” Damage Multiplier: 1.0Ã—</li>
        <li>â­ Level 3 â€” Proc Rate: 11% â€” Damage Multiplier: 1.1Ã—</li>
      </ul>
    </div>

    <h3>Algorithm</h3>
    <div class="feature-box">
      <p>The bot uses the <strong>Hungarian Algorithm</strong> (<code>scipy.optimize.linear_sum_assignment</code>) to solve the optimal assignment problem and maximize total output.</p>
    </div>

    <h2>ğŸ›¡ï¸ Security Features</h2>
    <div class="feature-box">
      <ul>
        <li><strong>Account Age Verification</strong></li>
        <li><strong>Rate Limiting</strong> (per-user and per-guild for heavy commands)</li>
        <li><strong>Input Validation</strong></li>
        <li><strong>Creature Limits</strong> (prevents resource exhaustion)</li>
      </ul>
    </div>

    <h2>ğŸ“Š Supported Data</h2>
    <div class="feature-box">
      <h3>Creatures</h3>
      <ul>
        <li>Health points</li>
        <li>Mitigation values</li>
        <li>Elemental vulnerabilities and resistances</li>
      </ul>

      <h3>Charms</h3>
      <p>All 9 damage charms are supported:</p>
      <ul>
        <li>Enflame</li>
        <li>Freeze</li>
        <li>Zap</li>
        <li>Poison</li>
        <li>Curse</li>
        <li>Wound</li>
        <li>Divine Wrath</li>
        <li>Overpower</li>
        <li>Overflux</li>
      </ul>
    </div>

    <h2>ğŸŒ Language Support</h2>
    <div class="feature-box">
      <p>CharmsBot is available in <strong>English</strong> and is designed to support the international Tibia community.</p>
    </div>

    <h2>ğŸ¤– Add to Your Server</h2>
    <div class="discord-card">
      <p style="margin-bottom:12px; color:#c4c4c4;">
        Use the link below to add CharmsBot to your Discord server.
      </p>

      <div class="discord-badge-wrap">
        <a
          href="https://discord.com/oauth2/authorize?client_id=1324908850431791184&scope=bot%20applications.commands&permissions=0"
          target="_blank"
          rel="noopener noreferrer"
        >
          <img
            src="https://img.shields.io/badge/Add%20to%20Discord-5865F2?style=for-the-badge&logo=discord&logoColor=white"
            alt="Add to Discord"
          />
        </a>
      </div>
    </div>

    <div class="note-box">
      <p>CharmsBot is a fan-made project and is not affiliated with or endorsed by CipSoft GmbH. Tibia is a registered trademark of CipSoft GmbH.</p>
    </div>

    <div class="footer">
      <p>Made with â¤ï¸ for the Tibia community</p>
      <p>CharmsBot-site</p>
    </div>
  </div>

  <script src="assets/js/header-bar.js"></script>
  
  <script>
    // Bloqueo de instalaciÃ³n PWA
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      return false;
    });
  </script>
</body>
</html>